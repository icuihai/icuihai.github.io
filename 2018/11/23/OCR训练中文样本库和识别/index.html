<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="简述光学字符识别（英语：Optical Character Recognition，OCR）是指对文本资料的图像文件进行分析识别处理，获取文字及版面信息的过程。关于中文的识别最好的开源库应该就是Tesseract OCR了。本文则重点介绍训练出一份自己需要的样本库并识别（本文默认你已经会直接导入官方">
    

    <!--Author-->
    
        <meta name="author" content="icuihai">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="OCR训练中文样本库和识别"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Ich&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>OCR训练中文样本库和识别 - Ich&#39;s Blog</title>

    <!-- Tachyons Core CSS -->
    <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 ph5-ns ph3 text-light">
    
    <nav class="db dt-l w-100 mw8 center border-box pv3">
        <a class="db dtc-l v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="Ich's Blog">
            <img src="http://p6nix480q.bkt.clouddn.com/18-7-6/36041900.jpg" class="dib h3" alt="Ich's Blog">
        </a>
        <div class="db dtc-l v-mid w-100 w-75-l tc tr-l">
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/" 
                    title="Home">
                    Home
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/archives" 
                    title="Archives">
                    Archives
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/tags" 
                    title="Tags">
                    Tags
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/categories" 
                    title="Categories">
                    Categories
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/about.html" 
                    title="About">
                    About
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/contact.html" 
                    title="Contact">
                    Contact
                </a>
            
        </div>
    </nav>

    <!-- Title -->
    <div class="w-100 mw8 center vh-40 dt">
        <div class="dtc v-mid white">
            <h1 class="f1-l f2-m tc tc-m tl-ns">OCR训练中文样本库和识别</h1>
            <p class="f4 fw3 pab-100px tc tc-m tl-ns">2018-11-23</p>
        </div>
    </div>

    <!-- Icon -->
    <div class="relative w-100 mw8 center white dn dn-m db-ns">
        <i class="header-icon fa fa-file-text-o"></i>
    </div>
</div>

<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    

                    <!-- Main Post Content -->
                    <h3 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h3><p>光学字符识别（英语：<strong>Optical Character Recognition</strong>，<strong>OCR</strong>）是指对文本资料的图像文件进行分析识别处理，获取文字及版面信息的过程。关于中文的识别最好的开源库应该就是Tesseract OCR了。本文则重点介绍训练出一份自己需要的样本库并识别（本文默认你已经会直接导入官方训练库识别）</p>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>1）安装tesseract ocr引擎</p>
<p>以Mac为例，直接选择homebrew命令安装 brew install –with-training-tools tesseract </p>
<p>2）下载chi_sim.traindata（中文识别库，直接放在tesseract安装目录的tessdata目录下，例如/usr/local/Cellar/tesseract/4.0.0/share/tessdata））</p>
<p>3）下载jTessBoxEditor2.2.0 </p>
<h3 id="训练步骤"><a href="#训练步骤" class="headerlink" title="训练步骤"></a>训练步骤</h3><p>1）把样本图片或者文字转换成tif格式（图片转tif 可以直接网上搜）这里讲文字转tif</p>
<p>双击解压后的jTessBoxEditor.jar文件，选择工具栏TIFF/Box Generator，把需要转换的文字直接拷贝到下面空白处</p>
<p><img src="http://pimtphfgk.bkt.clouddn.com/18-11-23/84350008.jpg" alt=""></p>
<p>Output为tif文件输出目录，其他基本无需修改，然后点击Generate稍等片刻即可生成生成tif文件。</p>
<p>2）生成box文件</p>
<p>把第二步生成的tif文件改名 <strong>sll.normal.exp0.tif</strong> ，官网的写法~ 然后进入tif文件目录下执行命令 </p>
<p><code>tesseract sll.normal.exp0.tif sll.normal.exp0 -l chi_sim batch.nochop makebox1</code></p>
<p>3）选择工具栏Box Editor，点击Open导入第一步生成的tif文件（会自动绑定第二步生成的box文件）</p>
<p><img src="http://pimtphfgk.bkt.clouddn.com/18-11-23/15399215.jpg" alt=""></p>
<p>点击文字之后可以修改识别区域宽高，x，y坐标等，修改完成点击save保存</p>
<p>4）执行脚本</p>
<p>Mac执行 sh 脚本文件名.sh，然后回车依次输入sll（语言）normal（字体）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">!/bin/sh</span><br><span class="line"></span><br><span class="line">read -p "输入你语言:" lang</span><br><span class="line">echo &#123;lang&#125;</span><br><span class="line">read -p "输入你的字体:" font</span><br><span class="line">echo &#123;font&#125;</span><br><span class="line">echo "所以完整文件名为："</span><br><span class="line">echo &#123;lang&#125;.&#123;font&#125;.exp0.tif</span><br><span class="line">echo "开始。。。"</span><br><span class="line">echo &#123;font&#125; 0 0 0 0 0 &gt;font_properties</span><br><span class="line">tesseract  &#123;lang&#125;.&#123;font&#125;.exp0.tif &#123;lang&#125;.&#123;font&#125;.exp0  nobatch box.train</span><br><span class="line">unicharset_extractor &#123;lang&#125;.&#123;font&#125;.exp0.box</span><br><span class="line">shapeclustering -F font_properties -U unicharset &#123;lang&#125;.&#123;font&#125;.exp0.tr</span><br><span class="line">mftraining -F font_properties -U unicharset -O unicharset &#123;lang&#125;.&#123;font&#125;.exp0.tr</span><br><span class="line">cntraining &#123;lang&#125;.&#123;font&#125;.exp0.tr</span><br><span class="line">echo "开始重命名文件"</span><br><span class="line">mv inttemp &#123;font&#125;.inttemp</span><br><span class="line">mv normproto &#123;font&#125;.normproto</span><br><span class="line">mv pffmtable &#123;font&#125;.pffmtable</span><br><span class="line">mv shapetable &#123;font&#125;.shapetable</span><br><span class="line">mv unicharset &#123;font&#125;.unicharset</span><br><span class="line">echo "生成最终文件"</span><br><span class="line">combine_tessdata $&#123;font&#125;.</span><br><span class="line"></span><br><span class="line">echo "完成"</span><br></pre></td></tr></table></figure>
<p>运行成功之后就会生成.traineddata文件，这个文件即只能识别我们训练的“识别”俩字，所以说在大小，识别速度上会大大优于官网的中文包。</p>

                    
                    <!-- Tags Bottom -->
                    

                    <!-- Comments -->
                    



                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                    
                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 1: About -->
                    <div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="http://p6nix480q.bkt.clouddn.com/18-9-15/68427294.jpg" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="icuihai">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            
        </div>
    </article>
</div>

                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 2: Categories -->
                    

                    <!-- Widget 3: Recent Posts -->
                    <div class="mt5 tc tl-l">
    <h3>Recent Posts</h3>
    
        <p>
            <a href="/2018/11/23/OCR训练中文样本库和识别/">OCR训练中文样本库和识别</a>
        </p>
    
        <p>
            <a href="/2018/09/26/使用Jenkins自动构建Android应用打包并上传/">使用Jenkins自动构建Android应用打包并上传</a>
        </p>
    
        <p>
            <a href="/2018/07/19/全网最清晰的ConstraintLayout教程/">全网最清晰的ConstraintLayout教程</a>
        </p>
    
        <p>
            <a href="/2018/06/27/Android7-1-1Toast崩溃解决方案/">Android7.1.1Toast崩溃解决方案</a>
        </p>
    
        <p>
            <a href="/2018/04/04/编译Android下可执行命令的FFmpeg/">编译Android下可执行命令的FFmpeg</a>
        </p>
    
</div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<div class="bg-1 ph2 ph5-ns pv5">
        <div class="mv8">
            <div class="center tc">
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://twitter.com/?lang=en" target="_blank">
                            <i class="fa fa-twitter"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://www.facebook.com/" target="_blank">
                            <i class="fa fa-facebook"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://dribbble.com/" target="_blank">
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://github.com/icuihai" target="_blank">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://plus.google.com/" target="_blank">
                            <i class="fa fa-google-plus"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://www.behance.net/" target="_blank">
                            <i class="fa fa-behance"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://500px.com/" target="_blank">
                            <i class="fa fa-500px"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="mailto:icuihai@gmail.com" target="_blank">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="/#" target="_blank">
                            <i class="fa fa-rss"></i>
                        </a>
                    </div>
                
            </div>
<div >



<!-- After Footer -->
<!-- Disqus Comments -->



</body>

</html>